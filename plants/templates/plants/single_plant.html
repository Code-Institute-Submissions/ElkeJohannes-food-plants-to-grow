{% extends "base.html" %}
{% load static %}

{% block customHead %}
<!-- Custom CSS -->
<link rel="stylesheet" href="{% static 'plants/css/plants.css' %}">
{% endblock %}

{% block bodyMain %}
<section class="row mt-5 justify-content-center">
    <div class="col-8">
        <!-- Plant info -->
        <h4>{{plant.common_name}}</h4>
        <h6>{{plant.botanical_name}}</h6>
        <table class="table table-striped mt-5">
            <tr>
                <td>Category:</td>
                <td>{{plant.category.friendly_name}}</td>
            </tr>
            <tr>
                <td>Stock:</td>
                <td>{{plant.stock}}</td>
            </tr>
            <tr>
                <td>Price:</td>
                <td>â‚¬{{plant.price}}</td>
            </tr>
        </table>
        <div class="mt-3">
            {{plant.description}}
        </div>

        <!-- Add to cart # and button -->
        <div class="mt-4">
            <div class="input-group justify-content-center m-1">
                <div class="input-group-prepend">
                    <button class="btn btn-black" data-item_id="{{ plant.id }}"
                        id="decrement-quantity">
                        <span class="icon">
                            <i class="fas fa-minus"></i>
                        </span>
                    </button>
                </div>
                <input class="quantity-input" type="number" name="quantity" value="1" min="1" max="{{plant.stock}}"
                    data-item_id="{{ plant.id }}" id="id_qty_{{ plant.id }}" disabled>
                <div class="input-group-append">
                    <button class="btn btn-black" data-item_id="{{ plant.id }}"
                        id="increment-quantity">
                        <span class="icon">
                            <i class="fas fa-plus"></i>
                        </span>
                    </button>
                </div>
            </div>
            <div class="text-center m-1">
                <a href="#" class="btn btn-success">Add to cart</a>                
            </div>
        </div>
    </div>
    <div class="col-4 text-center">
        <!-- Plant image, fill with placeholder if not present -->
        {% if plant.image_url %}
        <img class="" src={{ plant.Image_url }} alt="Image of {{ plant.common_name }}" />
        {% else %}
        <img class="" src="{{ MEDIA_URL }}noimage.png" alt="No image uploaded" />
        {% endif %}
    </div>
</section>
{% endblock %}

{% block customBodyEnd %}
<script>
    // Function to increment (+)
    $('#increment-quantity').click(function(){
        const STOCK = '{{plant.stock}}';
        let currentVal = parseInt($('.quantity-input').val());
        if(currentVal < STOCK){
            currentVal++;
            $('.quantity-input').val(currentVal);
        }
    })

    // Function to decrement (-)
    $('#decrement-quantity').click(function(){
        const MINIMUM = 1;
        let currentVal = parseInt($('.quantity-input').val());
        if(currentVal > MINIMUM){
            currentVal--;
            $('.quantity-input').val(currentVal);
        }
    })
</script>
{% endblock %}